@model RestoHive_Reseller.Models.CompetitorsViewModel
@using System.Linq
@{
    ViewData["Title"] = "Competitors";
    var restoIcon = Url.Content("~/img/competitors/group.png");
    var sectionImage = Url.Content("~/img/competitors/sect.png");
}

<div class="competitors-page">
    <!-- Carousel row right after search bar -->
    <div class="top-section mb-3">
        <div class="row g-3 align-items-center">
            <!-- Carousel -->
            <div class="col-12 col-lg-10">
                <div class="competitor-carousel">
                    <button class="carousel-btn carousel-btn-left" aria-label="Previous">
                        <i class="bx bx-chevron-left"></i>
                    </button>

                    <div class="competitor-items">
                        @for (int i = 0; i < 8; i++)
                        {
                            var isActive = i == 0;
                            <div class="competitor-item @(isActive ? "active" : "")">
                                <div class="competitor-icon">
                                    <img src="@restoIcon" alt="Resto POS" class="resto-icon-img" />
                                </div>
                                <span class="competitor-name">Resto POS</span>
                            </div>
                        }
                    </div>

                    <button class="carousel-btn carousel-btn-right" aria-label="Next">
                        <i class="bx bx-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- Add Competitor Button -->
            <div class="col-12 col-lg-2">
                <button class="btn btn-add-competitor w-100">
                    Add competitor +
                </button>
            </div>
        </div>
    </div>

    
    <!-- <div class="comparison-image-wrapper">
        <img src="@sectionImage" alt="Competitors Comparison" class="comparison-image" />
    </div>
</div> -->






<!-- Pricing Comparison Table -->
<div class="pricing-table-container">
    <div class="pricing-table-wrapper">
        <!-- Features Column -->
        <div class="features-column">
            <div class="features-header">
                <h2 class="features-title">Features</h2>
                <p class="features-subtitle">Sell faster and smarter</p>
                <div class="features-divider"></div>
                <!-- Up Arrow -->
                <div class="arrow-up">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m18 15-6-6-6 6"/>
                    </svg>
                </div>
            </div>
            
            <!-- Feature List -->
            <ul class="feature-list">
                <li class="feature-item">
                    <span class="feature-text">24/7 Support<br>and configuration services</span>
                </li>
                <li class="feature-item">
                    <span class="feature-text">24/7 Support<br>and configuration services</span>
                </li>
                <li class="feature-item">
                    <span class="feature-text">24/7 Support<br>and configuration services</span>
                </li>
                <li class="feature-item">
                    <span class="feature-text">24/7 Support<br>and configuration services</span>
                </li>
                <li class="feature-item">
                    <span class="feature-text">24/7 Support<br>and configuration services</span>
                </li>
            </ul>
            
            <!-- Down Arrow -->
            <div class="features-footer">
                <div class="arrow-down">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="m6 9 6 6 6-6"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Vertical Divider -->
        <div class="vertical-divider"></div>

        <!-- Product Columns -->
        <div class="product-columns">
            <!-- Clover Columns -->
            @for (int i = 0; i < 6; i++)
            {
                <div class="product-column">
                    <!-- Header -->
                    <div class="product-header">
                    <div class="product-name style="color: black;">Clover</div>
                        <div class="product-logo">
                        
                            <img src="~/img/competitors/clover-logo.png" alt="Clover" class="clover-logo" />
                        </div>
                        
                        <div class="price-circle">
                            <span class="price-text">$25.99</span>
                        </div>
                    </div>
                    
                    <!-- Feature Icons -->
                    @{
                        var featureMatrix = new bool[,] {
                            { true, false, false, false, false, false },
                            { false, true, false, true, true, true },
                            { true, true, true, false, true, true },
                            { true, false, true, false, true, false },
                            { true, true, false, false, false, true }
                        };
                    }
                    
                    @for (int row = 0; row < 5; row++)
                    {
                        <div class="feature-icon-row">
                            @if (featureMatrix[row, i])
                            {
                                <div class="icon-circle check-circle">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M20 6 9 17l-5-5" stroke="black" fill="none" stroke-width="3"/>
                                    </svg>
                                </div>
                            }
                            else
                            {
                                <div class="icon-circle x-circle">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M18 6 6 18" stroke="white" fill="none" stroke-width="3"/>
                                        <path d="M6 6l12 12" stroke="white" fill="none" stroke-width="3"/>
                                    </svg>
                                </div>
                            }
                        </div>
                    }
                </div>
                
                <!-- Vertical Divider between columns -->
                @if (i < 5)
                {
                    <div class="column-divider"></div>
                }
            }

            <!-- Resto POS Column -->
            <div class="column-divider"></div>
            <div class="product-column resto-column">
                <!-- Header -->
                <div class="product-header resto-header">
                <div class="product-name">Resto POS</div>
                    <div class="product-logo">
                        <img src="~/img/competitors/group.png" alt="Restaurant" class="restaurant-icon" />
                    </div>
                    
                    <div class="price-circle resto-price">
                        <span class="price-text resto-price-text">$25.99</span>
                    </div>
                </div>
                
                <!-- Feature Icons -->
                @{
                    var restoFeatures = new bool[] { true, true, true, true, true };
                }
                
                @for (int row = 0; row < 5; row++)
                {
                    <div class="feature-icon-row resto-icon-row">
                        <div class="icon-circle check-circle">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m9 12 2 2 4-4"/>
                            </svg>
                        </div>
                    </div>
                }
            </div>
            
            <!-- Final Vertical Divider -->
            <div class="column-divider"></div>
        </div>
    </div>
    
    <!-- Table Overlays -->
    <div class="table-overlays">
        <!-- Row 1 Overlay (previously Row 2) -->
        <div class="row-overlay" style="top: 137px;"></div>
        <!-- Row 2 Overlay (previously Row 3) -->
        <div class="row-overlay" style="top: 274px;"></div>
        <!-- Row 3 Overlay (previously Row 4) -->
        <div class="row-overlay" style="top: 411px;"></div>
        <!-- Row 4 Overlay (previously Row 5) -->
        <div class="row-overlay" style="top: 548px;"></div>
        <!-- Row 5 Overlay (previously Row 6) -->
        <div class="row-overlay" style="top: 685px;"></div>
    </div>
</div>

<style>
/* Pricing Table Styles - 910px x 921px dimensions */
.pricing-table-container { 
    position: relative; 
    margin-top: 1rem; 
    width: 100%;
    max-width: 100%;
}

.pricing-table-wrapper { 
    display: flex; 
    background: #d9d9d9; 
    border-radius: 12px; 
    box-shadow: 0 2px 8px rgba(0,0,0,0.08); 
    overflow: hidden; 
    position: relative; 
    width: 100%;
    max-width: 100%;
    height: 921px;
}

/* Features Column */
.features-column { 
    background: #1e293b; 
    color: white; 
    width: 200px; 
    display: flex; 
    flex-direction: column; 
    flex-shrink: 0;
}

.features-header { 
    padding: 1.5rem; 
    text-align: center; 
    height: 129px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    position: relative; 
}

.features-title { 
    font-size: 1.5rem; 
    font-weight: bold; 
    margin: 0;
    color: white; 
}

.features-subtitle { 
    font-size: 0.875rem; 
    margin: 0.25rem 0 0; 
    opacity: 0.8;
    color: white;
    position: relative;
    display: inline-block;
    padding-bottom: 0;
    text-decoration: underline;
    text-decoration-style: double;
    text-decoration-color: white;
    text-underline-offset: 2px;
    text-decoration-thickness: 1px;
    text-underline-position: under;
}

.features-divider { 
    height: 1px; 
    background: rgba(255,255,255,0.3); 
    margin: 0.5rem 0; 
}

.arrow-up { 
    color: #f97316; 
    display: flex; 
    justify-content: center; 
    margin-top: 0.5rem;
}

.feature-row { 
    padding: 1rem; 
    min-height: 129px; 
    display: flex; 
    align-items: center; 
    margin-bottom: 1px; 
    border-bottom: 1px solid rgba(255,255,255,0.1);
}

/* More specific selector for the first feature row */
.features-column > .feature-row:first-of-type {
    min-height: 160px !important;
    height: 160px !important;
}

.feature-row:last-child { 
    margin-bottom: 0; 
    border-bottom: none;
}

.feature-text { 
    font-size: 0.875rem; 
    line-height: 1.4; 
}

.features-footer { 
    padding: 1rem; 
    display: flex; 
    justify-content: center; 
    margin-top: auto;
    border-top: 1px solid rgba(255,255,255,0.1);
}

.arrow-down { 
    color: #f97316; 
}

/* Vertical Dividers */
.vertical-divider { 
    width: 10px; 
    background: #1d2b4b; 
    z-index: 5; 
    flex-shrink: 0;
}

.column-divider { 
    width: 10px; 
    background: #1d2b4b; 
    z-index: 5; 
    flex-shrink: 0;
}

/* Product Columns */
.product-columns { 
    display: flex; 
    flex: 1; 
    position: relative;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.product-column { 
    flex: 1; 
    min-width: 120px;
    display: flex; 
    flex-direction: column; 
    background: #f3f4f6; 
}

.resto-column { 
    background: #cad64a; 
}

/* Product Headers */
.product-header { 
    height: 129px; 
    padding: 1rem; 
    display: flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    gap: 0.5rem; 
    text-align: center;
}

.resto-header { 
    background: #cad64a; 
}

.product-logo { 
    height: 32px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
}

.clover-logo, 
.restaurant-icon { 
    height: 28px; 
    width: auto; 
    max-width: 100%;
}

.product-name { 
    font-size: 0.875rem; 
    font-weight: 600; 
    color: #374151; 
}

.price-circle { 
    width: 60px; 
    height: 60px; 
    min-width: 60px;
    min-height: 60px;
    border-radius: 50%; 
    background: #d1d5db; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    margin:  auto;
    overflow: hidden;
    aspect-ratio: 1/1;
}

.resto-price { 
    background: white;
    border: 1px solid #e5e7eb;
}

.price-text { 
    font-size: 1rem; 
    font-weight: 600; 
    color:rgb(5, 5, 5); 
}

.resto-price-text { 
    color: #dc2626; 
}

/* Feature Icon Rows */
.feature-icon-row { 
    height: 129px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    margin-bottom: 12px; 
    border-bottom: 1px solid rgba(0,0,0,0.05);
}

.resto-icon-row { 
    height: 141px; 
    margin-bottom: 6px; 
}

.feature-icon-row:last-child, 
.resto-icon-row:last-child { 
    margin-bottom: 0; 
    border-bottom: none;
}

.icon-circle { 
    width: 40px; 
    height: 40px; 
    min-width: 40px;
    min-height: 40px;
    border-radius: 50%; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    padding: 0;
    margin: 0 auto;
    overflow: hidden;
}

.check-circle { 
    background: #8dc243; 
    color: black; 
}

.x-circle { 
    background: #9598a9; 
    color: black; 
}

.icon-circle svg {
    width: 30px;
    height: 30px;
    display: block;
    margin: 0;
    padding: 0;
}

/* Table Overlays */
.table-overlays { 
    position: absolute; 
    top: 0; 
    left: 0; 
    right: 0; 
    bottom: 0; 
    pointer-events: none; 
    z-index: 10; 
}

.row-overlay { 
    position: absolute; 
    left: 0; 
    right: 0; 
    height: 129px; 
    background: rgba(192, 193, 198, 0.2);
    pointer-events: none;
}

/* Responsive Styles */
</style>

<style>
    @@media (max-width: 992px) { 
        .pricing-table-wrapper { 
            flex-direction: column;
            height: auto;
        }
        
        .features-column { 
            width: 100%;
            height: auto;
        }
        
        .product-columns { 
            flex-direction: row;
            overflow-x: auto;
        }
        
        .product-column {
            min-width: 150px;
        }
        
        .vertical-divider,
        .column-divider {
            display: none;
        }
    }

    @@media (max-width: 768px) {
        .pricing-table-container { 
            margin: 0.5rem;
        }
        
        .competitors-page { 
            padding: 0.6rem; 
        }
        
        .top-section { 
            padding: 0.45rem; 
        }
        
        .competitor-items { 
            gap: 0.7rem; 
        }
        
        .feature-row,
        .feature-icon-row {
            height: 100px;
            padding: 1rem;
        }
        
        .features-header,
        .product-header {
            height: 100px;
            padding: 1rem;
        }
        
        .price-circle {
            width: 60px;
            height: 60px;
        }
        
        .price-text {
            font-size: 0.875rem;
        }
    }

    /* Hide scrollbar for Chrome, Safari and Opera */
    .product-columns::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .product-columns {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
</style>








<!-- Add Competitor Panel (Right Offcanvas) -->
<div class="offcanvas offcanvas-end offcanvas-competitor" tabindex="-1" id="addCompetitorPanel" aria-labelledby="addCompetitorLabel" data-bs-scroll="false" data-bs-backdrop="true">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title fw-bold" id="addCompetitorLabel">New Competitor</h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body pt-0">
    <form id="competitorForm">
      <div class="row g-3">
        <div class="col-12">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" name="name" placeholder="Clover POS" required />
        </div>
        <div class="col-12">
          <label class="form-label">Phone number</label>
          <input type="tel" class="form-control" name="phone" placeholder="5143832345" />
        </div>
        <div class="col-12">
          <label class="form-label">Country</label>
          <select class="form-select" name="country">
            <option value="" selected>Choose...</option>
            <option>United States</option>
            <option>Canada</option>
            <option>United Kingdom</option>
            <option>Australia</option>
          </select>
        </div>
        <div class="col-12">
          <label class="form-label">Email</label>
          <input type="email" class="form-control" name="email" placeholder="jake@gmail.com" />
        </div>
        <div class="col-12">
          <label class="form-label">Website</label>
          <input type="url" class="form-control" name="website" placeholder="https://restohive.com/" />
        </div>
        <div class="col-12">
          <label class="form-label">Details</label>
          <textarea class="form-control" name="details" rows="3" placeholder="Features, 24/7 support and configurations services free, include KDS kitchen screen,..."></textarea>
        </div>
        <div class="col-12">
          <label class="form-label">Price / month</label>
          <div class="input-group">
            <input type="number" step="0.01" class="form-control" name="price" placeholder="18.00" />
            <span class="input-group-text">$</span>
          </div>
        </div>
        <div class="col-12">
          <label class="form-label">Upload Logo</label>
          <input type="file" class="d-none" id="logoInput" accept="image/*" />
          <button type="button" class="btn btn-upload w-100 d-flex align-items-center justify-content-center gap-2" id="logoBtn">
            <i class='bx bx-image-alt'></i>
            <span>Upload Logo</span>
          </button>
          <div class="small text-muted mt-1" id="logoName"></div>
        </div>
        <div class="col-12">
          <label class="form-label">Upload Features Screenshot</label>
          <input type="file" class="d-none" id="featuresInput" accept="image/*" />
          <button type="button" class="btn btn-upload w-100 d-flex align-items-center justify-content-center gap-2" id="featuresBtn">
            <i class='bx bx-image-add'></i>
            <span>Upload Features Screenshot</span>
          </button>
          <div class="small text-muted mt-1" id="featuresName"></div>
        </div>
      </div>
      <div class="d-flex justify-content-end gap-2 pt-3 border-top mt-3">
        <button type="button" class="btn btn-light" data-bs-dismiss="offcanvas">Cancel</button>
        <button type="submit" class="btn btn-primary btn-request">Request</button>
      </div>
    </form>
  </div>
</div>

<style>
/* Image icons for Resto POS */
.resto-icon-img { width: 40px; height: 40px; object-fit: contain; display: block; }

.competitors-page { padding: .75rem 1rem 1.5rem; background-color: #f8f9fa; min-height: 100vh; }

/* Top Section (carousel bar) */
.top-section { 
    background: #dedede; 
    border-radius: 10px; 
    padding: .4rem 0 .4rem .6rem; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.06); 
    height: 90px; 
    display: flex; 
    align-items: center; 
}
.competitor-carousel { display: flex; align-items: center; gap: .4rem; }
.carousel-btn { background: transparent; border: 0; color: #f07d00; width: 26px; height: 26px; display: inline-flex; align-items: center; justify-content: center; font-size: 1rem; border-radius: 6px; }
.carousel-btn:hover { background: rgba(240,125,0,0.1); }
.competitor-items { display: flex; gap: .9rem; overflow: hidden; flex: 1; padding: .1rem 0; scrollbar-width: none; -ms-overflow-style: none; }
.competitor-items::-webkit-scrollbar { display: none; }
.competitor-item { 
    display: inline-flex; 
    flex-direction: column; 
    align-items: center; 
    justify-content: center; 
    gap: .4rem; 
    padding: .5rem .75rem; 
    border-radius: 14px; 
    transition: all 0.2s ease; 
    min-width: 86px; 
    margin: 0.25rem 0;
}
.competitor-item.active { background: #dfe9aa; }
.competitor-icon { width: 18px; height: 18px; display: flex; align-items: center; justify-content: center; }
.competitor-name { font-size: .8rem; font-weight: 800; color: #111827; white-space: nowrap; line-height: 1; text-align: center; margin-top: 4px; }

.comparison-image-wrapper { height: 731px; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
.comparison-image { width: 100%; height: 100%; object-fit: cover; display: block; }

/* Buttons */
.btn-add-competitor { 
    background: #f07d00; 
    color: #fff; 
    border: none; 
    border-radius: 10px; 
    padding: .65rem 1.25rem; 
    font-weight: 800; 
    box-shadow: 0 2px 6px rgba(0,0,0,0.06); 
    min-width: 130px;
}
.btn-add-competitor:hover { 
    background: #e26f00; 
}

/* Offcanvas (right panel) */
.offcanvas-competitor { width: 30vw; max-width: 540px; min-width: 360px; } .offcanvas-competitor .offcanvas-body{ overflow-y:auto; max-height:calc(100vh - 64px); padding-bottom:1rem;} .offcanvas-competitor .offcanvas-header{ border-bottom:0; }
@@media (max-width: 992px) { .offcanvas-competitor { width: 90vw; min-width: auto; } }
.btn-upload { background: #f07d00; color: #fff; height: 48px; } .input-group-text{ background:#f2f3f5; }
.btn-upload:hover { background: #e26f00; color: #fff; }
.btn-request { background: #f07d00; border-color: #f07d00; }
.btn-request:hover { background: #e26f00; border-color: #e26f00; }

/* Responsive */
@@media (max-width: 768px) {
  .competitors-page { padding: .6rem; }
  .top-section { padding: .45rem; }
  .competitor-items { gap: .7rem; }
}
</style>

<script>
// Slide carousel with arrows; scrollbar hidden
document.addEventListener('DOMContentLoaded', function () {
  const container = document.querySelector('.competitor-items');
  const left = document.querySelector('.carousel-btn-left');
  const right = document.querySelector('.carousel-btn-right');
  if (container && left && right) {
    const getStep = () => {
      const first = container.querySelector('.competitor-item');
      const gap = parseFloat(getComputedStyle(container).gap || 0);
      return (first ? first.getBoundingClientRect().width : 100) + gap;
    };
    left.addEventListener('click', () => container.scrollBy({ left: -getStep(), behavior: 'smooth' }));
    right.addEventListener('click', () => container.scrollBy({ left: getStep(), behavior: 'smooth' }));
  }

  // Open right panel on button click
  const addBtn = document.querySelector('.btn-add-competitor');
  const panelEl = document.getElementById('addCompetitorPanel');
  if (addBtn && panelEl) {
    addBtn.addEventListener('click', function () {
      const panel = new bootstrap.Offcanvas(panelEl);
      panel.show();
    });
  }

  // Upload buttons
  const logoBtn = document.getElementById('logoBtn');
  const logoInput = document.getElementById('logoInput');
  const logoName = document.getElementById('logoName');
  if (logoBtn && logoInput) {
    logoBtn.addEventListener('click', () => logoInput.click());
    logoInput.addEventListener('change', () => { logoName.textContent = logoInput.files?.[0]?.name || ''; });
  }
  const featuresBtn = document.getElementById('featuresBtn');
  const featuresInput = document.getElementById('featuresInput');
  const featuresName = document.getElementById('featuresName');
  if (featuresBtn && featuresInput) {
    featuresBtn.addEventListener('click', () => featuresInput.click());
    featuresInput.addEventListener('change', () => { featuresName.textContent = featuresInput.files?.[0]?.name || ''; });
  }

  // Basic submit handler 
  const form = document.getElementById('competitorForm');
  if (form) {
    form.addEventListener('submit', function (e) {
      e.preventDefault();
      bootstrap.Offcanvas.getInstance(panelEl)?.hide();
    });
  }
});
</script>
