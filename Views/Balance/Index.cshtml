@{
  ViewData["Title"] = "Balance";
}

@section VendorStyles {
  <link rel="stylesheet" href="~/vendor/libs/datatables-bs5/datatables.bootstrap5.css">
  <link rel="stylesheet" href="~/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css">
  <link rel="stylesheet" href="~/vendor/libs/datatables-buttons-bs5/buttons.bootstrap5.css">
  <link rel="stylesheet" href="~/vendor/libs/apex-charts/apex-charts.css" />
}

@section VendorScripts {
  <script src="~/vendor/libs/moment/moment.js"></script>
  <script src="~/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
  <script src="~/vendor/libs/apex-charts/apexcharts.js"></script>
}

@section PageScripts {
  <script src="~/custom/js/balance.js"></script>
}

<div class="container-xxl flex-grow-1 p-0">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="fw-bold" style="color: #000;">Payout</h4>
    <button class="btn" style="background-color: #fd7e14; color: white; border-color: #fd7e14;" onclick="openManageBankModal()">
      Manage Bank
    </button>
  </div>
  <div class="card">
    <div class="card-body">
      <!-- Balance Summary -->
      <div class="mb-4">
        <h6 class="mb-3">Balance summary</h6>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted">On the way to your bank account</span>
          <span class="fw-bold">$0.00</span>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted">Upcoming payouts to your bank (estimated)</span>
          <span class="fw-bold">$13,000.85</span>
        </div>
        <hr class="my-3">
        <div class="d-flex justify-content-between align-items-center">
          <span class="fw-bold fs-5">Total</span>
          <span class="fw-bold fs-5">$13,000.85</span>
        </div>
      </div>

      <!-- Payouts Table -->
      <div class="mt-4">
        <div class="table-responsive">
          <table id="payoutsTable" class="table table-hover">
            <thead>
              <tr class="bg-light">
                <th>AMOUNT</th>
                <th>DESTINATION</th>
                <th>ARRIVE BY</th>
                <th>STATUS</th>
              </tr>
            </thead>
            <tbody>
              <!-- Table content will be populated by JavaScript -->
            </tbody>
          </table>
        </div>
        
        <!-- Pagination -->
        <div class="d-flex justify-content-end mt-3">
          <nav aria-label="Page navigation">
            <ul class="pagination mb-0">
              <!-- Pagination will be populated by JavaScript -->
            </ul>
          </nav>
        </div>
    </div>
  </div>
</div>

<!-- Manage Bank Modal - Full Height -->
<div class="modal fade" id="manageBankModal" tabindex="-1" aria-labelledby="manageBankModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-centered modal-fullscreen" style="margin-left: auto; margin-right: 0; max-width: 500px;">
    <div class="modal-content h-100">
      <div class="modal-header">
        <h5 class="modal-title" id="manageBankModalLabel">Edit Payout Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form>
          <!-- Payout Frequency -->
          <div class="mb-4">
            <h6 class="mb-3">Payout Frequency</h6>
            <div class="mb-3">
              <div class="form-check">
                <input class="form-check-input" type="radio" name="payoutFrequency" id="automatic" checked>
                <label class="form-check-label" for="automatic">
                  Automatic Every
                </label>
                <select class="form-select d-inline-block ms-3" style="width: 120px;">
                  <option selected>Day</option>
                  <option>Week</option>
                  <option>Month</option>
                </select>
              </div>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="payoutFrequency" id="manual">
              <label class="form-check-label" for="manual">
                Manual - Send payouts from Dashboard
              </label>
            </div>
          </div>

          <!-- Add Employee Bank Account -->
          <div class="mb-4">
            <h6 class="mb-3">Add an Employee bank account for payouts</h6>
            <p class="text-muted mb-3">Pay your Employee by Direct deposit to bank account.</p>
            
            <div class="row g-3">
              <div class="col-md-6">
                <label for="currency" class="form-label">Currency</label>
                <select class="form-select" id="currency">
                  <option selected>CAD - Canadian Dollar</option>
                  <option>USD - US Dollar</option>
                  <option>EUR - Euro</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="transitNumber" class="form-label">Transit number</label>
                <input type="text" class="form-control" id="transitNumber" value="20081">
              </div>
            </div>
            
            <div class="row g-3 mt-2">
              <div class="col-md-6">
                <label for="accountNumber" class="form-label">Account number</label>
                <input type="text" class="form-control" id="accountNumber" value="000123456789">
              </div>
              <div class="col-md-6">
                <label for="confirmAccountNumber" class="form-label">Confirm account number</label>
                <input type="text" class="form-control" id="confirmAccountNumber" value="000123456789">
              </div>
            </div>
            
            <div class="row g-3 mt-2">
              <div class="col-md-6">
                <label for="institutionNumber" class="form-label">Institution number</label>
                <input type="text" class="form-control" id="institutionNumber" value="002">
              </div>
              <div class="col-md-6 d-flex align-items-end">
                <button type="button" class="btn w-100" style="background-color: #fd7e14; color: white; border-color: #fd7e14;">
                  Verify Account
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn" style="background-color: #fd7e14; color: white; border-color: #fd7e14;">Submit</button>
      </div>
    </div>
  </div>
</div>

<script>
function openManageBankModal() {
  const modal = new bootstrap.Modal(document.getElementById('manageBankModal'));
  modal.show();
}
</script> 